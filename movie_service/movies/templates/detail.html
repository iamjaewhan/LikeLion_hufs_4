{% extends 'base.html' %}
{% block content %}
<style>

    .container_staff{
        display: -ms-flexbox; 
        display: flex; 
        flex-direction: row; 
        width: 90%;
        flex: initial;
        align-items: center;
        text-align: center;
        justify-content: space-between;
    }
    .container_main{
        display: -ms-flexbox; 
        display: flex; 
        flex-direction: row; 
        width: 100%;
        min-height: 310px;
        
        filter:grayscale(100%);
        background-size: cover;
    }
    
    .container_information{
        display: -ms-flexbox; 
        display: flex; 
        flex-direction: row; 
        width: 90%;
    }
    .staff_img{
        padding-left: 2em;
        padding-right: 2em;
    }
</style>
<body>
    {% csrf_token %}
    {% if movie %}
    <div class="container_main">
        <div class="container_summary">
            <p> {{ movie.title_kor }} </p></br>
            <p> {{movie.title_eng}} </p></br>
            <p> <img src="{{movie.poster_url}}" alt="" /></p></br>
            <p> {{movie.rating_aud}} </p></br>
            <p> {{movie.rating_cri}} </p></br>  
        </div>
    </div>
    
    
    
    <div class="container_information">
        <p> {{movie.genre}} </p></br>
        <p> {{movie.showtimes}} </p></br>
        <p> {{movie.release_date}} </p></br>
        <p> {{movie.rate}} </p></br>
    </div>
    
    {% endif %}
    <div class="container_staff">
        {% for staff in staffs %}
        <p class="staff_img"><img src="{{staff.image_url}}" alt="" /></br>{{staff.role}} </br> {{staff.name}}  </p>
        {% endfor %}
    </div>
    
    <h1>유저 평점 : {{ rate }}</h1>

    <div class="comment_form">
        <form action="{% url 'movies:comment' movie.id %}" method="POST">
            <h1>Comment Here</h1>
            {% csrf_token %}
            <p>Comment :<input type="text" name="comment"></p>
            <p>Rate : <input type="number" min='0' max='10' name="rate"></p>

        <button type="submit">comment</button>
        </form>
    </div>



    {% if comments %}
    
        {% for comment in comments %}
        <div>
            <h6>{{ comment.comment }}</h6>
            <h6>{{ comment.commenter }}</h6>
            <h6>{{ comment.rate }}</h6>
        </div>



        {% endfor %}
        <div class="comment_paginator">
            {% if comments.has_previous %}
            <a href="?page=1">처음</a>
            <a href="?page={{comments.previous_page_number}}">이전</a>
            {% endif %}
            <span>{{comments.number}}</span>
            <span>of</span>
            <span>{{comments.paginator.num_pages}}</span>
            {% if comments.has_next %}
            <a href="?page={{comments.next_page_number}}">다음</a>
            <a href="?page={{comments.paginator.num_pages}}">마지막</a>
            {% endif %}
        </div>


    {% endif %}
</body>
{% endblock %}

